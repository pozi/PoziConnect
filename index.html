<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Pozi Connect by groundtruth</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Pozi Connect</h1>
        <h2>Geospatial Data Processor</h2>
        <a href="https://github.com/groundtruth/PoziConnect" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a id="poziconnect" class="anchor" href="#poziconnect" aria-hidden="true"><span class="octicon octicon-link"></span></a>PoziConnect</h1>

<p>PoziConnect provides you with a simple interface for accessing, processing,
analysing and exporting your organisation's spatial and non-spatial data.</p>

<p>It can be executed from the Python source code, or it can be compiled into
a Windows binary release.</p>

<h2>
<a id="running-on-windows" class="anchor" href="#running-on-windows" aria-hidden="true"><span class="octicon octicon-link"></span></a>Running on Windows</h2>

<h3>
<a id="install-python" class="anchor" href="#install-python" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install Python</h3>

<p>Install <a href="http://www.portablepython.com/wiki/Download">Portable Python</a> into a
subdirectory of <code>vendor</code>. This is the only Python that PoziConnect will use -
you don't need a system install of Python. We have a tested version saved here:
<a href="https://s3.amazonaws.com/poziconnect/PortablePython_2.7.3.2.exe">Portable Python 2.7.3.2</a>.</p>

<p>Choose the following modules during installation:</p>

<ul>
<li>PyWin32</li>
<li>Py2Exe</li>
<li>wxPython</li>
<li>PyODBC</li>
</ul>

<p>Make sure that <code>PYTHON_DIR</code> in <code>setenv_python.bat</code> correctly points to the
Python <code>App</code> directory. For example:</p>

<pre><code>SET PYTHON_DIR=%VENDOR%\Portable Python 2.7.3.2\App
</code></pre>

<h3>
<a id="install-gdal-binaries" class="anchor" href="#install-gdal-binaries" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install GDAL binaries</h3>

<p>Install <a href="http://www.gisinternals.com/sdk/">GDAL binaries</a> into a subdirectory of
<code>vendor</code>.</p>

<p>You may need to match the architecture of the binaries (32 or 64-bit) with that
of the operating system on which you will run PoziConnect. We have a tested
(32-bit) version saved here:
<a href="https://s3.amazonaws.com/poziconnect/release-1600-gdal-1-9-mapserver-6-2.zip">release-1600-gdal-1-9-mapserver-6-2</a>.</p>

<p>The <code>GDAL_BASE</code> variable in <code>PoziConnect.ini</code> must point to the GDAL <code>bin</code>
directory. For example:</p>

<pre><code>GDAL_BASE: vendor\release-1600-gdal-1-9-mapserver-6-2\bin
</code></pre>

<h3>
<a id="run-it" class="anchor" href="#run-it" aria-hidden="true"><span class="octicon octicon-link"></span></a>Run it</h3>

<p>Launch <code>PoziConnect.bat</code> to run PoziConnect from the source code.</p>

<h2>
<a id="compiling-on-windows" class="anchor" href="#compiling-on-windows" aria-hidden="true"><span class="octicon octicon-link"></span></a>Compiling on Windows</h2>

<p>To compile PoziConnect into a Windows binary for public release, perform the
steps in the previous section, then run <code>build.bat</code>.</p>

<p>A full release of PoziConnect will be output to the <code>dist</code> directory. It should
contain <code>PoziConnect.exe</code>, additional DLLs, GDAL (from <code>vendor\*gdal*</code>), and
runtime directories and configuration taken from the top level of this repository.</p>

<h4>
<a id="to-build-with-an-alternate-logo" class="anchor" href="#to-build-with-an-alternate-logo" aria-hidden="true"><span class="octicon octicon-link"></span></a>To build with an alternate logo:</h4>

<ol>
<li> Transform the desired image file into a base64 string.</li>
<li> Put that string in: <code>app/PoziConnect/gui/PlaceLabBanner.py</code>,
in the imageBase64 variable (within triple double quotes).</li>
<li> Perform the build as usual.</li>
</ol>

<h4>
<a id="other-notes" class="anchor" href="#other-notes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Other notes:</h4>

<ul>
<li>Additional logging can be activated by setting the log level in <code>logger.py</code>
</li>
<li>Sometimes, changes to the source code (<code>*.py</code>) are not correctly reflected in
the corresponding compiled code (<code>*.pyc</code>). Delete the <code>*.pyc</code> files to force their
regeneration.</li>
</ul>

<h2>
<a id="running-on-macunix" class="anchor" href="#running-on-macunix" aria-hidden="true"><span class="octicon octicon-link"></span></a>Running on Mac/UNIX</h2>

<p>It is good practice to use <code>virtualenv</code> to isolate Python dependencies
(as described <a href="http://docs.python-guide.org/en/latest/dev/virtualenvs/">here</a>),
and <code>pip</code> to install those dependencies. However, in the case of PoziConnect
this is complicated by two issues.</p>

<h3>
<a id="special-dependencies" class="anchor" href="#special-dependencies" aria-hidden="true"><span class="octicon octicon-link"></span></a>Special dependencies</h3>

<p><strong>Firstly</strong>, PoziConnect depends on two things that are better installed as
operating system packages: <code>GDAL</code> and <code>wxPython</code>.</p>

<p>When <code>GDAL</code> is installed with its Python components, it provides Python
langugage bindings, but also many extra command line tools. PoziConnect
uses GDAL via the command line (not via Python bindings). Install it
on Mac using <a href="https://github.com/mxcl/homebrew">homebrew</a>:</p>

<pre><code>brew update &amp;&amp; brew install gdal --with-postgres --with-postgresql
</code></pre>

<p>After this, the output of <code>ogrinfo --formats</code> should include
<code>-&gt; "PostgreSQL" (read/write)</code>.</p>

<p>The <code>wxPython</code> module integrates with operating system GUI components
and is generally not installed via <code>pip</code>. Install it on Mac as described
<a href="http://stackoverflow.com/questions/9205317/how-do-i-install-wxpython-on-mac-os-x">here</a>,
with:</p>

<pre><code>brew update &amp;&amp; brew install wxmac
</code></pre>

<p>The <code>requirements.txt</code> file records module versions known to work together.</p>

<p>The remaining, normal python module dependency is <code>pyodbc</code>. At this point you
can <a href="http://docs.python-guide.org/en/latest/dev/virtualenvs/">create a virtualenv</a>,
then install the recommended <code>pyodbc</code> into it:</p>

<pre><code>pip install `grep pyodbc requirements.txt`
</code></pre>

<p>The output of <code>pip freeze</code> should now be very similar to <code>requirements.txt</code>.</p>

<h3>
<a id="virtualenv-aint-framework" class="anchor" href="#virtualenv-aint-framework" aria-hidden="true"><span class="octicon octicon-link"></span></a>Virtualenv ain't framework</h3>

<p><strong>Secondly</strong>, as you will see if you attempt to run PoziConnect from within the
virtualenv, <code>wxPython</code> needs to be run from a framework build of Python in
order to access the screen. The Python in the virtualenv is not a proper
framework Python (even when created from your system's famework Python).
This issue is discussed <a href="http://wiki.wxpython.org/wxPythonVirtualenvOnMac">in the <code>wxPython</code> documentation</a>.</p>

<p>The solution is to run PoziConnect from your system Python, but give it access
to the modules in the virtualenv. This access can be set up after Python is
started, as described <a href="http://www.virtualenv.org/en/latest/#using-virtualenv-without-bin-python">in the virtualenv documentation</a>.</p>

<p>If the environment variable <code>POZICONNECT_ACTIVATE_THIS</code> is set to the full
path of a <code>bin/activate_this.py</code> file in a virtualenv, PoziConnect will perform
<code>execfile</code> on it to gain access to that virtualenv's modules.</p>

<p>You can set the <code>POZICONNECT_ACTIVATE_THIS</code> variable using a tool like
<a href="https://github.com/kennethreitz/autoenv">autoenv</a>.</p>

<h3>
<a id="run-it-1" class="anchor" href="#run-it-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Run it</h3>

<p>With this done, run <code>deactivate</code> to leave your virtualenv and return to
your system's Python, then launch PoziConnect using the <code>PoziConnect.sh</code> bash
script.</p>

<h3>
<a id="other-notes-1" class="anchor" href="#other-notes-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Other notes</h3>

<ul>
<li>Running with setuptools 0.7.5 installed triggered the error
<code>AttributeError: ResourceManager instance has no attribute '_warn_unsafe_extraction'</code>.
Upgrading to setuptools 1.1 fixed the problem. Check your version of setuptools
with <code>which easy_install | xargs cat</code>.</li>
</ul>

<h2>
<a id="modes-of-execution" class="anchor" href="#modes-of-execution" aria-hidden="true"><span class="octicon octicon-link"></span></a>Modes of execution</h2>

<p>PoziConnect can be executed in several modes:</p>

<ul>
<li><p><strong>Interactive mode</strong>:
is entered when PoziConnect is launched without command-line parameters.
It is used for running tasks ad hoc.</p></li>
<li><p><strong>Silent mode</strong>:
is entered when PoziConnect launched with the <code>--recipe</code> command-line
paramater (see below). This is used to run multiple tasks unattended
(i.e. nightly, scheduled processing).</p></li>
</ul>

<h2>
<a id="layout" class="anchor" href="#layout" aria-hidden="true"><span class="octicon octicon-link"></span></a>Layout</h2>

<ul>
<li>
<code>app</code>: source code of the PoziConnect application</li>
<li>
<code>vendor</code>: place external dependencies here for Windows (Python, GDAL)</li>
<li>
<code>tasks</code>: contains the task INI files</li>
<li>
<code>recipes</code>: contains recipes (text files listing successive tasks)</li>
<li>
<code>PoziConnect.ini</code>: sets some environment variables</li>
<li>
<code>PoziConnect.bat</code>: a wrapper to run from source on Windows</li>
<li>
<code>PoziConnect.sh</code>: a wrapper to run from source on Mac/UNIX</li>
</ul>

<h2>
<a id="using-recipes" class="anchor" href="#using-recipes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using recipes</h2>

<p>Recipes are executed using the <code>--recipe</code> flag, for example:</p>

<pre><code>PoziConnect.bat --recipe=recipes/example_01.txt
</code></pre>

<p>Where <code>recipies/example_01.txt</code> is a text file with a list of tasks to run
(tasks are found in the <code>tasks</code> directory).</p>

<h2>
<a id="todo" class="anchor" href="#todo" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO</h2>

<ul>
<li>Finish renaming PlaceLab to PoziConnect in the entire codebase.</li>
</ul>

<h2>
<a id="copyright" class="anchor" href="#copyright" aria-hidden="true"><span class="octicon octicon-link"></span></a>Copyright</h2>

<p>Groundtruth Â© 2009-2013</p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/groundtruth/PoziConnect/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/groundtruth/PoziConnect/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/groundtruth/PoziConnect"></a> is maintained by <a href="https://github.com/groundtruth">groundtruth</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-27881682-7");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
